<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Orders Management</title>
  <link rel="stylesheet" href="admin.css">
</head>
<body>
  <button class="hamburger-btn" id="hamburger-btn">
    <span></span>
    <span></span>
    <span></span>
  </button>
  
  <!-- Add this overlay div right after the hamburger button -->
  <div class="sidebar-overlay" id="sidebar-overlay"></div>
  <div class="sidebar">
    <h2>Admin</h2>
    <a href="admin.html">Dashboard</a>
    <a href="admin-users.html">Users</a>
    <a href="admin-products.html">Products</a>
    <a href="admin-orders.html" class="active">Orders</a>
    <a href="admin-notifications.html">Notifications</a>
    <a href="admin-support.html">Support</a>
    <a href="admin-session-logs.html">Activity Logs</a>
    <a href="admin-error-logs.html">Error Monitoring</a>
    <a href="change-password.html">Change Password</a>
    <a href="#" id="logoutBtn" type="button" class="btn">Logout</a>
  </div>

  <div class="main-content">
    <h1>Orders Management</h1>

    <!-- Filters -->
    <div class="filters-section" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 8px;">
      <div style="display: flex; gap: 15px; flex-wrap: wrap;">
        <select id="status-filter" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
          <option value="" selected>All Statuses</option>
          <option value="pending">Pending</option>
          <option value="processing">Processing</option>
          <option value="shipped">Shipped</option>
          <option value="delivered">Delivered</option>
          <option value="cancelled">Cancelled</option>
          <option value="refunded">Refunded</option>
        </select>
        <select id="payment-filter" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
          <option value="" selected>All Payment Status</option>
          <option value="pending">Pending</option>
          <option value="paid">Paid</option>
          <option value="failed">Failed</option>
          <option value="refunded">Refunded</option>
        </select>
        <button id="filter-btn" style="padding: 8px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">Apply Filter</button>
        <button id="refresh-btn" style="padding: 8px 20px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">Refresh</button>
      </div>
    </div>

    <!-- Orders List -->
    <div id="orders-loading" style="text-align: center; padding: 40px;">
      <p>Loading orders...</p>
    </div>

    <div id="no-orders" style="display: none; text-align: center; padding: 40px; background: white; border-radius: 8px;">
      <h3>No Orders Found</h3>
      <p>No orders match the selected filters.</p>
    </div>

    <div id="orders-list"></div>

    <!-- Pagination -->
    <div id="pagination" style="display: none; margin-top: 20px; text-align: center;">
      <button id="prev-page" style="padding: 8px 16px; margin: 0 5px; cursor: pointer;">Previous</button>
      <span id="page-info"></span>
      <button id="next-page" style="padding: 8px 16px; margin: 0 5px; cursor: pointer;">Next</button>
    </div>
  </div>

  <!-- Order Details Modal -->
  <div class="admin-order-modal-overlay" id="order-modal-overlay">
    <div class="admin-order-modal">
      <div class="admin-order-modal-header">
        <h3>Order Details</h3>
        <button class="admin-order-close-btn" id="order-close-modal">&times;</button>
      </div>
      <div class="admin-order-modal-body" id="order-modal-body">
        <!-- Details will be populated here -->
      </div>
    </div>
  </div>

  <!-- Change Status Modal -->
  <div class="admin-status-modal-overlay" id="status-modal-overlay">
    <div class="admin-status-modal">
      <div class="admin-status-modal-header">
        <h3>Change Order Status</h3>
        <button class="admin-status-close-btn" id="status-close-modal">&times;</button>
      </div>
      <div class="admin-status-modal-body">
        <p>Change order status to:</p>
        <form id="status-form">
          <select id="new-status" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; margin: 10px 0;">
            <option value="processing">Processing</option>
            <option value="shipped">Shipped</option>
            <option value="delivered">Delivered</option>
            <option value="cancelled">Cancelled</option>
            <option value="refunded">Refunded</option>
          </select>
          <div class="admin-status-modal-actions">
            <button type="button" id="status-cancel-btn" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
            <button type="submit" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">Update Status</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="admin-delete-modal-overlay" id="delete-modal-overlay">
    <div class="admin-delete-modal">
      <div class="admin-delete-modal-header">
        <h3>Confirm Deletion</h3>
        <button class="admin-delete-close-btn" id="delete-close-modal">&times;</button>
      </div>
      <div class="admin-delete-modal-body">
        <p><strong>Warning:</strong> This action cannot be undone!</p>
        <p>Are you sure you want to permanently delete this order?</p>
        <div class="admin-delete-modal-actions">
          <button type="button" id="delete-cancel-btn" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
          <button type="button" id="delete-confirm-btn" style="padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">Delete Order</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Logout Modal -->
  <div id="logoutModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Confirm Logout</h2>
      <p>Are you sure you want to logout?</p>
      <div class="modal-actions">
        <button id="confirmLogout">Yes, Logout</button>
        <button id="cancelLogout">Cancel</button>
      </div>
    </div>
  </div>

  <script src="../frontend/csrf-helper.js"></script>
  <script src="../frontend/toast-helper.js"></script>
  <script src="admin-orders.js"></script>
  <script src="admin-general.js"></script>
</body>
</html>